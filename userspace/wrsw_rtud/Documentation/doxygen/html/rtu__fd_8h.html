<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>wrsw_rtud: software/wrsw_rtud/rtu_fd.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>software/wrsw_rtud/rtu_fd.h File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &quot;<a class="el" href="rtu_8h_source.html">rtu.h</a>&quot;</code><br/>

<p><a href="rtu__fd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#a135001d5360c2c2472130ada2d26c65e">DYNAMIC</a>&#160;&#160;&#160;1</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#ac4000bdbf38f5b5ebe317497be853113">rtu_fd_init</a> (uint16_t poly, unsigned long aging) __attribute__((warn_unused_result))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the RTU filtering database.  <a href="#ac4000bdbf38f5b5ebe317497be853113"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#abf891a64ec528eee1b0fdeb85468ff24">rtu_fd_create_entry</a> (uint8_t mac[ETH_ALEN], uint16_t vid, uint32_t port_map, int dynamic) __attribute__((warn_unused_result))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates or updates a filtering entry in the filtering database.  <a href="#abf891a64ec528eee1b0fdeb85468ff24"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#ab72ef40e7608376cbc88b59126df9aa1">rtu_fd_set_aging_time</a> (unsigned long t) __attribute__((warn_unused_result))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the aging time for dynamic filtering entries.  <a href="#ab72ef40e7608376cbc88b59126df9aa1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#aaff992c9bb044fc888963fe201468181">rtu_fd_set_hash_poly</a> (uint16_t poly)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the polynomial used for hash calculation. Changing the hash polynomial requires removing any existing entry from RTU table. Note in case RTU table becomes full, this function may be used to change hash polynomial (thus leading to a different hash distribution).  <a href="#aaff992c9bb044fc888963fe201468181"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#a3e4731c162738b2e5141bc85a496b831">rtu_fd_flush</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes old filtering entries from filtering database to support changes in active topology.  <a href="#a3e4731c162738b2e5141bc85a496b831"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfiltering__entry.html">filtering_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtu__fd_8h.html#acbf5fc9d04e59e85d2fbd4c242ab3ee3">rtu_fd_lookup_htab_entry</a> (int index)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a135001d5360c2c2472130ada2d26c65e"></a><!-- doxytag: member="rtu_fd.h::DYNAMIC" ref="a135001d5360c2c2472130ada2d26c65e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DYNAMIC&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a10b2d890d871e1489bb02b7e70d9bdfb"></a><!-- doxytag: member="rtu_fd.h::STATIC" ref="a10b2d890d871e1489bb02b7e70d9bdfb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATIC&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="abf891a64ec528eee1b0fdeb85468ff24"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_create_entry" ref="abf891a64ec528eee1b0fdeb85468ff24" args="(uint8_t mac[ETH_ALEN], uint16_t vid, uint32_t port_map, int dynamic) __attribute__((warn_unused_result))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtu_fd_create_entry </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"> <em>mac</em>[ETH_ALEN], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"> <em>port_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>dynamic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates or updates a filtering entry in the filtering database. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mac</td><td>MAC address specification </td></tr>
    <tr><td class="paramname">vid</td><td>VLAN identifier </td></tr>
    <tr><td class="paramname">port_map</td><td>a port map specification with a control element for each outbound port to specify filtering for that MAC address specification and VID </td></tr>
    <tr><td class="paramname">dynamic</td><td>it indicates whether it's a dynamic entry </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if entry was created or updated. -ENOMEM if no space is available. </dd></dl>

</div>
</div>
<a class="anchor" id="a3e4731c162738b2e5141bc85a496b831"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_flush" ref="a3e4731c162738b2e5141bc85a496b831" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtu_fd_flush </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes old filtering entries from filtering database to support changes in active topology. </p>

</div>
</div>
<a class="anchor" id="ac4000bdbf38f5b5ebe317497be853113"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_init" ref="ac4000bdbf38f5b5ebe317497be853113" args="(uint16_t poly, unsigned long aging) __attribute__((warn_unused_result))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtu_fd_init </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>poly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"> <em>aging</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the RTU filtering database. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">poly</td><td>hash polinomial. </td></tr>
    <tr><td class="paramname">aging</td><td>aging time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acbf5fc9d04e59e85d2fbd4c242ab3ee3"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_lookup_htab_entry" ref="acbf5fc9d04e59e85d2fbd4c242ab3ee3" args="(int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfiltering__entry.html">filtering_entry</a>* rtu_fd_lookup_htab_entry </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>index</em>&#160;)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab72ef40e7608376cbc88b59126df9aa1"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_set_aging_time" ref="ab72ef40e7608376cbc88b59126df9aa1" args="(unsigned long t) __attribute__((warn_unused_result))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rtu_fd_set_aging_time </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"> <em>t</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the aging time for dynamic filtering entries. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>new aging time value [seconds]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-EINVAL if t &lt; 10 or t &gt; 1000000 (802.1Q, Table 8.3); 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="aaff992c9bb044fc888963fe201468181"></a><!-- doxytag: member="rtu_fd.h::rtu_fd_set_hash_poly" ref="aaff992c9bb044fc888963fe201468181" args="(uint16_t poly)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtu_fd_set_hash_poly </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"> <em>poly</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the polynomial used for hash calculation. Changing the hash polynomial requires removing any existing entry from RTU table. Note in case RTU table becomes full, this function may be used to change hash polynomial (thus leading to a different hash distribution). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">poly</td><td>binary polynomial representation. CRC-16-CCITT -&gt; 1+x^5+x^12+x^16 -&gt; 0x1021 CRC-16-IBM -&gt; 1+x^2+x^15+x^16 -&gt; 0x8005 CRC-16-DECT -&gt; 1+x^3+x^7+x^8+x^10+x^16 -&gt; 0x0589 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Feb 3 2011 17:09:03 for wrsw_rtud by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
