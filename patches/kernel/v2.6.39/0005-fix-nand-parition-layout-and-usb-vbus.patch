From 6f5a77b2cc2b1253ee5a4a9fb578c3bd4e5a8e60 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Tomasz=20W=C5=82ostowski?= <tomasz.wlostowski@cern.ch>
Date: Thu, 31 May 2012 13:26:20 +0200
Subject: [PATCH] Fix NAND partition layout to avoid overwriting barebox
 environment and USB VBus pin connection

---
 arch/arm/mach-at91/board-sam9m10g45ek.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-at91/board-sam9m10g45ek.c b/arch/arm/mach-at91/board-sam9m10g45ek.c
index d0e1e67..2ce5751 100644
--- a/arch/arm/mach-at91/board-sam9m10g45ek.c
+++ b/arch/arm/mach-at91/board-sam9m10g45ek.c
@@ -81,7 +81,7 @@ static struct at91_usbh_data __initdata ek_usbh_hs_data = {
  * USB HS Device port
  */
 static struct usba_platform_data __initdata ek_usba_udc_data = {
-	.vbus_pin	= AT91_PIN_PB19,
+	.vbus_pin	= AT91_PIN_PB8,
 };
 
 
@@ -131,14 +131,14 @@ static struct at91_eth_data __initdata ek_macb_data = {
  */
 static struct mtd_partition __initdata ek_nand_partition[] = {
 	{
-		.name	= "Partition 1",
+		.name	= "kernel",
 		.offset	= 0,
 		.size	= SZ_64M,
 	},
 	{
-		.name	= "Partition 2",
+		.name	= "rootfs",
 		.offset	= MTDPART_OFS_NXTBLK,
-		.size	= MTDPART_SIZ_FULL,
+		.size	= SZ_128M,
 	},
 };
 
-- 
1.7.5.4

